<!DOCTYPE html>
<html>
<head>
<title>Video Recording and Transcription</title>
<style>
  #video {
    width: 640px;
    height: 480px;
    border: 1px solid black;
  }
</style>
</head>
<body>

<h1>Video Recording and Transcription</h1>

<video id="video" autoplay></video>
<button id="startRecording">Start Recording</button>
<button id="stopRecording" disabled>Stop Recording</button>

<div id="transcription"></div>

<script>
  let recorder, chunks = [];
  const video = document.getElementById('video');
  const startRecording = document.getElementById('startRecording');
  const stopRecording = document.getElementById('stopRecording');
  const transcription = document.getElementById('transcription');

  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => {
      video.srcObject = stream;
      recorder = new MediaRecorder(stream);

      recorder.ondataavailable = e => {
        if (e.data.size > 0) {
          chunks.push(e.data);
        }
      };

      recorder.onstop = () => {
        const blob = new Blob(chunks, { type: 'video/webm' }); // Or video/mp4, depending on browser support
        chunks = []; // Clear chunks for the next recording

        // Here you would typically upload the blob to a server
        // and use a speech-to-text service to get the transcription.
        // I'm using a placeholder for demonstration.

        // Placeholder transcription (replace with actual service call)
        transcription.textContent = "Transcription will appear here after processing.  (Simulated)";

        // For demonstration, you can create a download link:
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'recorded_video.webm'; // Change file extension if needed
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      };


      startRecording.onclick = () => {
        recorder.start();
        startRecording.disabled = true;
        stopRecording.disabled = false;
      };

      stopRecording.onclick = () => {
        recorder.stop();
        startRecording.disabled = false;
        stopRecording.disabled = true;
      };

    })
    .catch(err => console.error('Error accessing camera:', err));


</script>

</body>
</html>
